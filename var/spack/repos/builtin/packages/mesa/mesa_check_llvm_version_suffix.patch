diff --git a/meson.build b/meson.build
index 07ef92dbff8..958c441600e 100644
--- a/meson.build
+++ b/meson.build
@@ -1703,6 +1703,13 @@ if with_llvm
   pre_args += '-DMESA_LLVM_VERSION_STRING="@0@"'.format(dep_llvm.version())
   pre_args += '-DLLVM_IS_SHARED=@0@'.format(_shared_llvm.to_int())
 
+  # If LLVM is pre-release then define the suffix
+  # This is redundant with: https://reviews.llvm.org/D115818
+  llvm_version_prerelease = dep_llvm.version().to_lower().contains('git')
+  if llvm_version_prerelease
+    pre_args += '-DLLVM_VERSION_SUFFIX'
+  endif
+
   if draw_with_llvm
     pre_args += '-DDRAW_LLVM_AVAILABLE'
   elif with_swrast_vk
diff --git a/src/gallium/auxiliary/gallivm/lp_bld_misc.cpp b/src/gallium/auxiliary/gallivm/lp_bld_misc.cpp
index be288ab02e2..378381b16ff 100644
--- a/src/gallium/auxiliary/gallivm/lp_bld_misc.cpp
+++ b/src/gallium/auxiliary/gallivm/lp_bld_misc.cpp
@@ -619,8 +619,15 @@ lp_is_function(LLVMValueRef v)
 extern "C" void
 lp_set_module_stack_alignment_override(LLVMModuleRef MRef, unsigned align)
 {
-#if LLVM_VERSION_MAJOR >= 13
-   llvm::Module *M = llvm::unwrap(MRef);
-   M->setOverrideStackAlignment(align);
+// Check that the LLVM version is >= 13.0.0 "release"
+// llvm::Module::setOverrideStackAlignment was added during the LLVM 13.0.0 development cycle and
+// cannot be guarenteed to exist until the official release.
+#if (                                                                                              \
+  LLVM_VERSION_MAJOR > 13 ||                                                                       \
+  (LLVM_VERSION_MAJOR == 13 &&                                                                     \
+   (LLVM_VERSION_MINOR > 0 ||                                                                      \
+    (LLVM_VERSION_MINOR == 0 && (LLVM_VERSION_PATCH > 0 || !defined(LLVM_VERSION_SUFFIX))))))
+  llvm::Module* M = llvm::unwrap(MRef);
+  M->setOverrideStackAlignment(align);
 #endif
 }
